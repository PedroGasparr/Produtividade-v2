<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buscar Funcionário - Sistema de Operação</title>
    <!-- Importar Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <!-- Biblioteca para geração de QR Code -->
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.1/build/qrcode.min.js"></script>
    <!-- Biblioteca para geração de PDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link rel="stylesheet" href="../css/buscar_funcionario.css">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <span>Prod</span>Plan
            </div>
            
            <ul class="nav-links">
                <li><a href="operacao.html">Operação</a></li>
                <li><a href="cadastrar_funcionario.html">Cadastrar Funcionário</a></li>
                <li><a href="buscar_funcionario.html" class="active">Buscar Funcionário</a></li>
                <li><a href="ranking.html">Ranking</a></li>
                <li><a href="painel_controle.html">Painel de Controle</a></li>
                <li><a href="historico.html">Histórico</a></li>
            </ul>
            
            <div class="user-section">
                <div class="user-info">
                    <div class="user-name">Carregando...</div>
                    <div class="user-role" id="userRole"></div>
                </div>
                <button class="logout-btn">Sair</button>
            </div>
        </div>
    </nav>
    
    <div class="content">
        <h1 class="page-title">Buscar Funcionário</h1>
        
        <div class="search-container">
            <input type="text" id="searchInput" class="search-input" placeholder="Digite o nome ou código do funcionário">
            <button id="searchButton" class="search-button">Buscar</button>
        </div>
        
        <div class="search-info" id="searchInfo">
            Buscando apenas funcionários da sua unidade: <span id="currentUnit">Carregando...</span>
        </div>
        
        <div class="success-message" id="successMessage"></div>
        <div class="error-message" id="errorMessage"></div>
        
        <div class="loading" id="loading">
            <div class="loading-spinner"></div>
            <p>Carregando...</p>
        </div>
        
        <div class="no-results" id="noResults">
            Nenhum funcionário encontrado com os critérios de busca.
        </div>
        
        <!-- Container para múltiplos resultados -->
        <div class="results-container" id="resultsContainer">
            <h3 class="results-title">Resultados da Busca (<span id="resultsCount">0</span>)</h3>
            <div class="employees-grid" id="employeesGrid">
                <!-- Os cards dos funcionários serão inseridos aqui dinamicamente -->
            </div>
        </div>
        
        <!-- Card individual (mantido para compatibilidade) -->
        <div class="employee-card" id="employeeCard">
            <div class="employee-header">
                <img src="https://via.placeholder.com/120" alt="Foto do Funcionário" class="employee-photo" id="employeePhoto">
                <div class="employee-info">
                    <h2 class="employee-name" id="employeeName">Nome do Funcionário</h2>
                    <p class="employee-detail" id="employeeCode">Código: </p>
                    <p class="employee-detail" id="employeeUnit">Unidade: </p>
                    <p class="employee-detail" id="employeeRole">Cargo: </p>
                    <p class="employee-detail" id="employeeStatus">Status: </p>
                    <p class="employee-detail" id="employeeDate">Data de Cadastro: </p>
                </div>
            </div>
            
            <div class="employee-actions">
                <button class="action-btn download-btn" id="downloadBtn">Baixar QR Code em PDF</button>
                <button class="action-btn upload-btn" id="uploadPhotoBtn">Enviar Foto</button>
                <button class="action-btn delete-btn" id="deleteBtn">Excluir Funcionário</button>
            </div>
        </div>
    </div>
    
    <!-- Modal para upload de foto -->
    <div class="modal" id="photoModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Enviar Foto do Funcionário</h2>
                <span class="close-btn" id="closeModal">&times;</span>
            </div>
            <input type="file" id="photoInput" class="file-input" accept="image/*">
            <img id="previewImage" class="preview-image" src="" alt="Preview">
            <div class="modal-actions">
                <button class="cancel-btn" id="cancelUpload">Cancelar</button>
                <button class="save-btn" id="savePhoto">Salvar Foto</button>
            </div>
        </div>
    </div>

    <script>
        // Configuração do Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyCMu17OV-5ST1rlg00zbpt6Hv37GKqkX4A",
            authDomain: "projetos-d868d.firebaseapp.com",
            databaseURL: "https://projetos-d868d-default-rtdb.firebaseio.com",
            projectId: "projetos-d868d",
            storageBucket: "projetos-d868d.firebasestorage.app",
            messagingSenderId: "420029352781",
            appId: "1:420029352781:web:05176699348e0ccdd78504",
            measurementId: "G-FXWXRX04WF"
        };
        
        // Inicializar Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const auth = firebase.auth();
        
        // Elementos da interface
        const userNameElement = document.querySelector('.user-name');
        const userRoleElement = document.getElementById('userRole');
        const searchInput = document.getElementById('searchInput');
        const searchButton = document.getElementById('searchButton');
        const searchInfo = document.getElementById('searchInfo');
        const currentUnitElement = document.getElementById('currentUnit');
        const employeeCard = document.getElementById('employeeCard');
        const noResults = document.getElementById('noResults');
        const successMessage = document.getElementById('successMessage');
        const errorMessage = document.getElementById('errorMessage');
        const loadingElement = document.getElementById('loading');
        const resultsContainer = document.getElementById('resultsContainer');
        const employeesGrid = document.getElementById('employeesGrid');
        const resultsCount = document.getElementById('resultsCount');
        
        // Elementos do card do funcionário
        const employeePhoto = document.getElementById('employeePhoto');
        const employeeName = document.getElementById('employeeName');
        const employeeCode = document.getElementById('employeeCode');
        const employeeUnit = document.getElementById('employeeUnit');
        const employeeRole = document.getElementById('employeeRole');
        const employeeStatus = document.getElementById('employeeStatus');
        const employeeDate = document.getElementById('employeeDate');
        const downloadBtn = document.getElementById('downloadBtn');
        const uploadPhotoBtn = document.getElementById('uploadPhotoBtn');
        const deleteBtn = document.getElementById('deleteBtn');
        
        // Elementos do modal de foto
        const photoModal = document.getElementById('photoModal');
        const photoInput = document.getElementById('photoInput');
        const previewImage = document.getElementById('previewImage');
        const closeModal = document.getElementById('closeModal');
        const cancelUpload = document.getElementById('cancelUpload');
        const savePhoto = document.getElementById('savePhoto');
        
        // Estado da aplicação
        let currentUser = null;
        let currentUserData = null;
        let currentEmployee = null;
        let currentEmployeeId = null;
        let currentUnit = ''; // VARIÁVEL ADICIONADA - mesma lógica da tela de operação
        
        // Verificar autenticação - CORRIGIDO para usar a mesma lógica da tela de operação
        auth.onAuthStateChanged((user) => {
            if (user) {
                currentUser = user;
                userNameElement.textContent = 'Carregando...';
                
                // Buscar dados do usuário no Firestore - MESMA LÓGICA DA TELA DE OPERAÇÃO
                db.collection('users').doc(user.uid).get()
                .then((doc) => {
                    if (doc.exists) {
                        currentUserData = doc.data();
                        userNameElement.textContent = currentUserData.name;
                        userRoleElement.textContent = currentUserData.role || 'Usuário';
                        
                        // CORREÇÃO: Usar 'unit' em vez de 'unidade' - igual na tela de operação
                        currentUnit = currentUserData.unit; // ← ESTA É A LINHA IMPORTANTE
                        
                        if (currentUnit) {
                            currentUnitElement.textContent = currentUnit;
                            searchInfo.textContent = `Buscando apenas funcionários da unidade: ${currentUnit}`;
                        } else {
                            currentUnitElement.textContent = 'Unidade não definida';
                            showError('Sua unidade não está definida. Entre em contato com o administrador.');
                        }
                    } else {
                        console.error("Documento do usuário não encontrado");
                        showError('Dados do usuário não encontrados.');
                    }
                })
                .catch((error) => {
                    console.error("Erro ao buscar dados do usuário:", error);
                    showError('Erro ao carregar dados do usuário.');
                });
            } else {
                // Usuário não autenticado, redirecionar para login
                window.location.href = 'login.html';
            }
        });
        
        // Buscar funcionários com filtro de unidade e busca aproximada - CORRIGIDO
        function searchEmployee() {
            const searchTerm = searchInput.value.trim();
            
            if (!searchTerm) {
                showError('Digite um nome ou código para buscar');
                return;
            }
            
            // CORREÇÃO: Verificar se currentUnit está definido
            if (!currentUnit) {
                showError('Não foi possível identificar sua unidade. Entre em contato com o administrador.');
                return;
            }
            
            // Limpar mensagens e resultados anteriores
            hideMessages();
            clearResults();
            showLoading();
            
            // Buscar todos os funcionários da mesma unidade - CORREÇÃO: usar 'unidade' para colaboradores
            db.collection('colaboradores')
                .where('unidade', '==', currentUnit) // ← CORREÇÃO: usar currentUnit
                .get()
                .then((querySnapshot) => {
                    hideLoading();
                    
                    if (querySnapshot.empty) {
                        showNoResults();
                        return;
                    }
                    
                    // Filtrar resultados localmente para busca aproximada
                    const employees = [];
                    const searchLower = searchTerm.toLowerCase();
                    
                    querySnapshot.forEach((doc) => {
                        const employeeData = doc.data();
                        
                        // Busca aproximada por nome ou código
                        const nameMatch = employeeData.nome && 
                                         employeeData.nome.toLowerCase().includes(searchLower);
                        const codeMatch = employeeData.codigo && 
                                         employeeData.codigo.toLowerCase().includes(searchLower);
                        
                        if (nameMatch || codeMatch) {
                            employees.push({
                                id: doc.id,
                                ...employeeData
                            });
                        }
                    });
                    
                    if (employees.length > 0) {
                        displayMultipleEmployees(employees);
                    } else {
                        showNoResults();
                    }
                })
                .catch((error) => {
                    console.error("Erro ao buscar funcionários:", error);
                    showError('Erro ao buscar funcionários. Tente novamente.');
                    hideLoading();
                });
        }
        
        // Exibir múltiplos funcionários em cards
        function displayMultipleEmployees(employees) {
            employeesGrid.innerHTML = '';
            resultsCount.textContent = employees.length;
            
            employees.forEach(employee => {
                const employeeCard = createEmployeeCard(employee);
                employeesGrid.appendChild(employeeCard);
            });
            
            resultsContainer.style.display = 'block';
            noResults.style.display = 'none';
            // Ocultar o card individual antigo
            document.getElementById('employeeCard').style.display = 'none';
        }
        
        // Criar card de funcionário para exibição em grid
        function createEmployeeCard(employee) {
            const card = document.createElement('div');
            card.className = 'employee-grid-card';
            card.setAttribute('data-employee-id', employee.id);
            
            // Formatar data
            let formattedDate = 'N/A';
            if (employee.dataCadastro && employee.dataCadastro.toDate) {
                const date = employee.dataCadastro.toDate();
                formattedDate = date.toLocaleDateString('pt-BR');
            }
            
            card.innerHTML = `
                <div class="employee-grid-header">
                    <img src="${employee.fotoBase64 || 'https://via.placeholder.com/80?text=Sem+Foto'}" 
                         alt="Foto do Funcionário" class="employee-grid-photo"
                         onerror="this.src='https://via.placeholder.com/80?text=Sem+Foto'">
                    <div class="employee-grid-info">
                        <h3 class="employee-grid-name">${employee.nome || 'Nome não informado'}</h3>
                        <p class="employee-grid-detail"><strong>Código:</strong> ${employee.codigo || 'N/A'}</p>
                        <p class="employee-grid-detail"><strong>Cargo:</strong> ${employee.funcao || 'N/A'}</p>
                        <p class="employee-grid-detail"><strong>Status:</strong> <span class="status-badge ${employee.status || 'ativo'}">${employee.status || 'Ativo'}</span></p>
                        <p class="employee-grid-detail"><strong>Data:</strong> ${formattedDate}</p>
                    </div>
                </div>
                <div class="employee-grid-actions">
                    <button class="action-btn view-btn" onclick="viewEmployeeDetails('${employee.id}')">Ver Detalhes</button>
                    <button class="action-btn download-btn" onclick="generatePDFForEmployee('${employee.id}')">QR Code PDF</button>
                </div>
            `;
            
            return card;
        }
        
        // Ver detalhes de um funcionário específico
        function viewEmployeeDetails(employeeId) {
            showLoading();
            
            db.collection('colaboradores').doc(employeeId).get()
                .then((doc) => {
                    hideLoading();
                    
                    if (doc.exists) {
                        displayEmployeeDetails(doc);
                    } else {
                        showError('Funcionário não encontrado.');
                    }
                })
                .catch((error) => {
                    console.error("Erro ao buscar funcionário:", error);
                    showError('Erro ao carregar detalhes do funcionário.');
                    hideLoading();
                });
        }
        
        // Exibir detalhes completos do funcionário no card individual
        function displayEmployeeDetails(doc) {
            currentEmployee = {
                id: doc.id,
                ...doc.data()
            };
            currentEmployeeId = doc.id;
            
            // Preencher os dados no card
            employeeName.textContent = currentEmployee.nome || 'Nome não informado';
            employeeCode.textContent = `Código: ${currentEmployee.codigo || 'N/A'}`;
            employeeUnit.textContent = `Unidade: ${currentEmployee.unidade || 'N/A'}`;
            employeeRole.textContent = `Cargo: ${currentEmployee.funcao || 'N/A'}`;
            employeeStatus.textContent = `Status: ${currentEmployee.status || 'N/A'}`;
            
            // Formatar data
            if (currentEmployee.dataCadastro && currentEmployee.dataCadastro.toDate) {
                const date = currentEmployee.dataCadastro.toDate();
                employeeDate.textContent = `Data de Cadastro: ${date.toLocaleDateString('pt-BR')}`;
            } else {
                employeeDate.textContent = 'Data de Cadastro: N/A';
            }
            
            // Carregar foto se existir
            if (currentEmployee.fotoBase64) {
                employeePhoto.src = currentEmployee.fotoBase64;
            } else {
                employeePhoto.src = 'https://via.placeholder.com/120?text=Sem+Foto';
            }
            
            // Exibir card individual e esconder outros
            employeeCard.style.display = 'block';
            resultsContainer.style.display = 'none';
            noResults.style.display = 'none';
        }
        
        // Gerar PDF para um funcionário específico
        function generatePDFForEmployee(employeeId) {
            showLoading();
            
            db.collection('colaboradores').doc(employeeId).get()
                .then((doc) => {
                    hideLoading();
                    
                    if (doc.exists) {
                        const employee = {
                            id: doc.id,
                            ...doc.data()
                        };
                        generatePDF(employee);
                    } else {
                        showError('Funcionário não encontrado.');
                    }
                })
                .catch((error) => {
                    console.error("Erro ao buscar funcionário:", error);
                    showError('Erro ao gerar PDF.');
                    hideLoading();
                });
        }
        
        // Gerar PDF com QR Code (função original mantida)
        function generatePDF(employee) {
            if (!employee) return;
            
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            // Adicionar logo ou título
            doc.setFontSize(20);
            doc.setTextColor(40, 40, 40);
            doc.text('Identificação do Funcionário', 105, 20, { align: 'center' });
            
            // Adicionar linha divisória
            doc.setDrawColor(200, 200, 200);
            doc.line(20, 25, 190, 25);
            
            // Adicionar informações do funcionário
            doc.setFontSize(12);
            doc.setTextColor(80, 80, 80);
            doc.text(`Nome: ${employee.nome}`, 20, 40);
            doc.text(`Código: ${employee.codigo}`, 20, 50);
            doc.text(`Unidade: ${employee.unidade}`, 20, 60);
            doc.text(`Cargo: ${employee.funcao}`, 20, 70);
            doc.text(`Status: ${employee.status}`, 20, 80);
            
            // Formatar data
            if (employee.dataCadastro && employee.dataCadastro.toDate) {
                const date = employee.dataCadastro.toDate();
                doc.text(`Data de Cadastro: ${date.toLocaleDateString('pt-BR')}`, 20, 90);
            }
            
            // Adicionar foto se existir
            if (employee.fotoBase64) {
                doc.addImage(employee.fotoBase64, 'JPEG', 130, 35, 50, 50);
            }
            
            // Gerar QR Code
            const qrCodeData = employee.codigo;
            const qrCodeSize = 50;
            const qrCodeX = employee.fotoBase64 ? 130 : 130;
            const qrCodeY = employee.fotoBase64 ? 90 : 35;
            
            // Criar canvas temporário para o QR Code
            const canvas = document.createElement('canvas');
            QRCode.toCanvas(canvas, qrCodeData, {
                width: qrCodeSize * 4,
                margin: 1,
                color: {
                    dark: '#000000',
                    light: '#FFFFFF'
                }
            }, function(error) {
                if (error) {
                    console.error('Erro ao gerar QR Code:', error);
                    showError('Erro ao gerar QR Code. Tente novamente.');
                    return;
                }
                
                // Adicionar QR Code ao PDF
                const qrCodeImage = canvas.toDataURL('image/png');
                doc.addImage(qrCodeImage, 'PNG', qrCodeX, qrCodeY, qrCodeSize, qrCodeSize);
                
                // Adicionar instruções
                doc.setFontSize(10);
                doc.setTextColor(100, 100, 100);
                const instructionsY = employee.fotoBase64 ? 145 : 110;
                doc.text('Use este QR Code para registrar a presença em operações', 20, instructionsY);
                doc.text('Este documento deve ser mantido em local visível', 20, instructionsY + 10);
                
                // Salvar PDF
                doc.save(`QRCode_${employee.codigo}.pdf`);
            });
        }
        
        // Excluir funcionário
        function deleteEmployee() {
            if (!currentEmployeeId || !confirm('Tem certeza que deseja excluir este funcionário? Esta ação não pode ser desfeita.')) {
                return;
            }
            
            db.collection('colaboradores').doc(currentEmployeeId).delete()
            .then(() => {
                showSuccess('Funcionário excluído com sucesso!');
                employeeCard.style.display = 'none';
                searchInput.value = '';
                currentEmployeeId = null;
                currentEmployee = null;
            })
            .catch((error) => {
                console.error("Erro ao excluir funcionário:", error);
                showError('Erro ao excluir funcionário. Tente novamente.');
            });
        }
        
        // Fazer upload da foto
        function uploadPhoto() {
            if (!currentEmployeeId) return;
            
            // Abrir o modal
            photoModal.style.display = 'block';
        }
        
        // Fechar modal
        function closePhotoModal() {
            photoModal.style.display = 'none';
            photoInput.value = '';
            previewImage.src = '';
        }
        
        // Converter imagem para Base64
        function convertImageToBase64(file, callback) {
            const reader = new FileReader();
            reader.onload = function(e) {
                callback(e.target.result);
            };
            reader.onerror = function(error) {
                console.error('Erro ao converter imagem:', error);
                callback(null);
            };
            reader.readAsDataURL(file);
        }
        
        // Salvar foto
        function saveEmployeePhoto() {
            if (!photoInput.files[0] || !currentEmployeeId) {
                showError('Selecione uma imagem primeiro');
                return;
            }
            
            const file = photoInput.files[0];
            
            // Mostrar loading
            showLoading();
            
            // Converter a imagem para Base64
            convertImageToBase64(file, (base64String) => {
                if (!base64String) {
                    hideLoading();
                    showError('Erro ao processar a imagem. Tente novamente.');
                    return;
                }
                
                // Atualizar documento do funcionário com a foto em Base64
                db.collection('colaboradores').doc(currentEmployeeId).update({
                    fotoBase64: base64String
                })
                .then(() => {
                    // Atualizar a foto exibida
                    employeePhoto.src = base64String;
                    if (currentEmployee) {
                        currentEmployee.fotoBase64 = base64String;
                    }
                    
                    // Fechar o modal e mostrar mensagem de sucesso
                    closePhotoModal();
                    showSuccess('Foto salva com sucesso!');
                    hideLoading();
                })
                .catch(error => {
                    console.error("Erro ao salvar foto:", error);
                    showError('Erro ao salvar foto. Tente novamente.');
                    hideLoading();
                });
            });
        }
        
        // Preview da imagem selecionada
        function previewSelectedImage() {
            const file = photoInput.files[0];
            
            if (file) {
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    previewImage.src = e.target.result;
                }
                
                reader.readAsDataURL(file);
            }
        }
        
        // Limpar resultados
        function clearResults() {
            employeesGrid.innerHTML = '';
            resultsContainer.style.display = 'none';
            employeeCard.style.display = 'none';
        }
        
        // Mostrar "nenhum resultado"
        function showNoResults() {
            noResults.style.display = 'block';
            resultsContainer.style.display = 'none';
            employeeCard.style.display = 'none';
        }
        
        // Mostrar loading
        function showLoading() {
            loadingElement.style.display = 'block';
        }
        
        // Ocultar loading
        function hideLoading() {
            loadingElement.style.display = 'none';
        }
        
        // Mostrar mensagem de sucesso
        function showSuccess(message) {
            successMessage.textContent = message;
            successMessage.style.display = 'block';
            errorMessage.style.display = 'none';
            
            // Ocultar após 5 segundos
            setTimeout(hideMessages, 5000);
        }
        
        // Mostrar mensagem de erro
        function showError(message) {
            errorMessage.textContent = message;
            errorMessage.style.display = 'block';
            successMessage.style.display = 'none';
            
            // Ocultar após 5 segundos
            setTimeout(hideMessages, 5000);
        }
        
        // Ocultar mensagens
        function hideMessages() {
            successMessage.style.display = 'none';
            errorMessage.style.display = 'none';
        }
        
        // Event Listeners
        searchButton.addEventListener('click', searchEmployee);
        
        searchInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                searchEmployee();
            }
        });
        
        // Busca em tempo real (opcional)
        searchInput.addEventListener('input', (e) => {
            const searchTerm = e.target.value.trim();
            if (searchTerm.length >= 2) {
                // Buscar automaticamente após 2 caracteres
                clearTimeout(window.searchTimeout);
                window.searchTimeout = setTimeout(searchEmployee, 500);
            } else if (searchTerm.length === 0) {
                // Limpar resultados se o campo estiver vazio
                clearResults();
                noResults.style.display = 'none';
            }
        });
        
        downloadBtn.addEventListener('click', () => {
            if (currentEmployee) {
                generatePDF(currentEmployee);
            }
        });
        
        deleteBtn.addEventListener('click', deleteEmployee);
        
        uploadPhotoBtn.addEventListener('click', uploadPhoto);
        
        closeModal.addEventListener('click', closePhotoModal);
        
        cancelUpload.addEventListener('click', closePhotoModal);
        
        savePhoto.addEventListener('click', saveEmployeePhoto);
        
        photoInput.addEventListener('change', previewSelectedImage);
        
        // Fechar modal clicando fora dele
        window.addEventListener('click', (e) => {
            if (e.target === photoModal) {
                closePhotoModal();
            }
        });
        
        // Destacar link ativo na navbar
        const currentPage = window.location.pathname.split('/').pop();
        const navLinks = document.querySelectorAll('.nav-links a');
        
        navLinks.forEach(link => {
            const linkPage = link.getAttribute('href');
            if (currentPage === linkPage) {
                link.classList.add('active');
            } else {
                link.classList.remove('active');
            }
        });
        
        // Simulação de logout
        document.querySelector('.logout-btn').addEventListener('click', function() {
            if (confirm('Tem certeza que deseja sair do sistema?')) {
                auth.signOut().then(() => {
                    window.location.href = 'index.html';
                }).catch((error) => {
                    console.error('Erro ao fazer logout:', error);
                });
            }
        });
        
        // Tornar funções globais para uso nos eventos onclick
        window.viewEmployeeDetails = viewEmployeeDetails;
        window.generatePDFForEmployee = generatePDFForEmployee;
    </script>

    <style>
        /* Estilos adicionais para a nova interface */
        .search-info {
            background: #e3f2fd;
            border: 1px solid #2196f3;
            border-radius: 8px;
            padding: 12px;
            margin: 15px 0;
            text-align: center;
            font-weight: 500;
            color: #1976d2;
        }
        
        .results-container {
            display: none;
            margin-top: 20px;
        }
        
        .results-title {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.2em;
        }
        
        .employees-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .employee-grid-card {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .employee-grid-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }
        
        .employee-grid-header {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            margin-bottom: 12px;
        }
        
        .employee-grid-photo {
            width: 60px;
            height: 60px;
            border-radius: 8px;
            object-fit: cover;
            border: 2px solid #e0e0e0;
        }
        
        .employee-grid-info {
            flex: 1;
        }
        
        .employee-grid-name {
            margin: 0 0 8px 0;
            font-size: 1.1em;
            color: #333;
            font-weight: 600;
        }
        
        .employee-grid-detail {
            margin: 4px 0;
            font-size: 0.9em;
            color: #666;
        }
        
        .employee-grid-actions {
            display: flex;
            gap: 8px;
            justify-content: space-between;
        }
        
        .action-btn {
            padding: 8px 12px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.85em;
            font-weight: 500;
            transition: background-color 0.2s;
            flex: 1;
        }
        
        .view-btn {
            background: #2196f3;
            color: white;
        }
        
        .view-btn:hover {
            background: #1976d2;
        }
        
        .download-btn {
            background: #4caf50;
            color: white;
        }
        
        .download-btn:hover {
            background: #388e3c;
        }
        
        .status-badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: 500;
        }
        
        .status-badge.ativo {
            background: #e8f5e8;
            color: #2e7d32;
        }
        
        .status-badge.inativo {
            background: #ffebee;
            color: #c62828;
        }
    </style>
</body>
</html>